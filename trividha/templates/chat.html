{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trividha Chatbot</title>
     <link rel="stylesheet" href="{%static 'css/chat.css'%}?v=2">
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <h1 style="color: white;FONT-FAMILY: auto;"> TRIVIDHA ASSISTANT</h1>
            <p style="color: white;">Your personal guide to Trividha events</p>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message">
                <h3 style="color: white;">Welcome to Trividha!</h3>
                <p style="color: white;font-family: none;">I'm here to help you with information about our events. Ask me anything about Sthithapagya, Optazia, or Xenora!</p>
            </div >

            {%if answer%}
            <div class="answer">
                {{answer|safe}}
            </div>
            {%endif%}
            <div id="divContainer">

            </div>

            <div id="divContainer2">

            </div>            

        </div>
        
        <div class="typing-indicator" id="typingIndicator">
            <div class="typing-dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="chat-input-container">
            <form class="chat-input-form" id="chatForm" method="post">
                {% csrf_token %}
                <textarea 
                    name="question"
                    class="chat-input" 
                    id="messageInput" 
                    placeholder="Ask me about Trividha events..."
                    rows="1"
                    required
                ></textarea>
                <button type="submit" class="send-button" id="sendButton" onclick="sent()">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="22" y1="2" x2="11" y2="13"></line>
                        <polygon points="22,2 15,22 11,13 2,9 22,2"></polygon>
                    </svg>
                </button>
            </form>
        </div>
    </div>
    <script>
        function sent() {
            const message = document.getElementById('messageInput').value;
            const newDiv = document.createElement('div');
            newDiv.className = 'dynamic-div';
            newDiv.innerHTML = `
                <p>${message}</p>
            `;

            const div2 = document.createElement('div');
            div2.className = 'answer';
            div2.innerHTML = `
                <p>PROCESSING.........PLEASE WAIT!</p>
            `;

            const container = document.getElementById('divContainer');
            const container2 = document.getElementById('divContainer2');
            container.style.display = "block";
            container.appendChild(newDiv);
            container2.appendChild(div2);

        }
    </script>
